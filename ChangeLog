CHANGE LOG ENTRY 1 9/6/25
Creation & sizing
Add boards at runtime: add_board_mm(L, W, T) drops at mouse ground, honors snap.
Duplication: duplicate_active() with smart drop (mouse if over yard, else +X offset).
Resize hotkeys (with Shift):
Width: Shift+‚Üê/‚Üí
Length: Shift+‚Üë/‚Üì
Thickness: Shift+PgUp/PgDn
Remember last size: last_spawn_size_mm updates after add/resize.
Selection, alignment, snapping
Two-board face alignment (F): _align_pair_on_face() aligns B to A on hovered face.
Hover face overlay: translucent Quad on face under cursor.
Lift step adjust: [/] adjusts lift step; E/Q (or PgUp/PgDn) lifts active.

Input cleanup
Consolidated _unhandled_input:
Single path for mouse select, motion-drag update, and key handling.
Removed duplicate match blocks that caused earlier parse errors.

IDs, import, persistence
Deterministic IDs: _next_part_id() + _reset_part_ids() used on render/import.
Cutlist render: stable instance names, optional source label preserved.
Save/Load: ProjectIO.save_project / load_project round-trip instances + features.

Blueprint export
Cameras: _ensure_blueprint_cameras() creates CamTop/CamFront/CamSide (orthographic).
Framing: _compute_scene_aabb() + _frame_blueprint_cameras() (Godot 4 AABB.expand()).
PNG export: _export_blueprints() (V) captures each camera to PNG.
GLB export

Scene packaging: ProjectIO.export_glb_to(path) duplicates boards under WoodshopExport and writes GLTF.
HUD / UX
HUD base string fixed (no stray base variable): now hud_base.
Units flip: M toggles mm‚Üîin display formatting.
Type-safety & parse fixes

Replaced := with explicit types where warnings were promoted to errors (e.g., _resize_active, alignment dictionaries).
Fixed AABB.expand_to ‚Üí aabb = aabb.expand(point) (Godot 4).
Removed stray class-body lines that referenced hud_label (moved back inside functions).

Utilities
_opposite_face, _ground_point_at_mouse, _raycast solidified.
_reset_active_board() helper to rebuild CSG of active board when needed.




9/6/25 Changelog ‚Äî session recap
Removed
scripts/Exporter.gd
Duplicated GLB export covered by ProjectIO.export_glb_to().
scripts/JoineryMiniDialog.gd
Legacy/unused popup; no references in current flow.

Updated
scripts/CutlistImporter.gd
Deleted stray _col() helper that referenced out-of-scope idx/cols (parser error).
Kept _csv_col() as the single accessor.
No behavioral change to JSON/CSV parsing.
scripts/Main.gd
Removed unused line: @onready var exporter: Exporter = $"../export/Exporter".
(Note: you still can switch Basis().looking_at(...) ‚Üí Basis.looking_at(...) later to silence warnings‚Äîoptional.)

scripts/config.gd + Autoload
Resolved autoload name collision:
Kept autoload name Config and removed/renamed class_name in config.gd OR
Kept class_name Config and changed autoload name (e.g., CFG) and updated references.
Outcome: onboarding.gd can call Config.show_onboarding and Config.save_cfg() as instance methods.

ui/onboarding.gd
Crash fix: the %NodeName lookups failed (nodes weren‚Äôt unique). Two viable changes were applied (you picked one):
A. Marked nodes (BtnNext, BtnClose, ChkDontShow, Page1‚Äì3) as Unique Name in Scene, keeping % lookups, or

B. Rewrote script to defensively fetch nodes (works with/without %, won‚Äôt crash if missing) and gracefully hides onboarding if incomplete.
End result: no more startup crash after Start.
ui/MainMenu.gd
Fixed scene switching by replacing guessy paths with a hardwired MAIN_SCENE_PATH (or an auto-finder), plus:
Explicit signal connections in _ready() (so it works even if not wired in the editor).
Input safety: ensures the button is enabled and receives clicks.
Debug helpers: filesystem listing, loud errors.
Tabs-only indentation (fixed mixed tabs/spaces warnings).

Behavioral fixes achieved
Game boots to Main Menu, the Start button successfully transitions to your Main scene.
Onboarding no longer crashes the scene if its nodes aren‚Äôt found.
Autoload Config now works without class-name collision.
Project runs clean of the earlier parse errors; joinery/boards render again.

Known/visible issues (UI polish)
TopBar overlaps the inline help text (see screenshot). Quick remedies:
Put help text in its own Label anchored Top-Left with margins (e.g., CanvasLayer/UI/HelpLabel) and set TopBar inside a PanelContainer with padding so it‚Äôs visually distinct.
Ensure TopBar has Mouse ‚Üí Filter = Stop and help text Mouse ‚Üí Filter = Ignore, so clicks hit buttons reliably.
If using two separate containers, set TopBar‚Äôs z_index a notch higher than the help background but keep layout margins to avoid text overlap.

CHANGELOG 9/8/25
UI Overhaul

Removed legacy Panel/VBox UI scaffold.
Built new UI structure:
TopBar (styled with TopBar.gd, Phtshp-style dark theme).
HSplit ‚Üí LeftDock + VSplit ‚Üí CenterStack + RightDock.
Row inside TopBar for button layout.
Added button styling (hover/pressed/disabled/focus states).
Snap checkbox integrated cleanly into TopBar.
Joinery menu wired dynamically (BtnJoinery + JoineryMenu).

üõ† Main.gd Refactor

Cleaned _wire_topbar_auto() ‚Äî now automatically finds and wires buttons by name.
Added _call_first() method ‚Üí allows flexible calling of action handlers across Main, JoineryManager, ProjectIO, etc.
Fixed duplicated / redundant joinery.init() calls.
Added _fix_ui_layout() to enforce anchors and responsive sizing.
Restored _lift_active() function (Z-axis moves with Q/E/PageUp/PageDown).
Tightened _unhandled_input() to respect UI focus.

JoineryManager

Fixed variable type inference warnings (typed floats, ints, Boards).
Cleaned init() to avoid bool‚ÜíButton type errors.
Ensured Joinery popup (PopupMenu) is created dynamically if missing.
Re-typed ids (Array of ints) to fix runtime crashes.
Mortise and Pair M+T now selectable via UI or hotkeys.

Camera System
Added OrbitCamera.gd (custom script).
Fixed ternary operator parse errors ‚Üí replaced with proper if/else.

Implemented:
RMB drag ‚Üí orbit.
MMB drag ‚Üí pan.
Mouse wheel ‚Üí zoom.
Camera is now functional and responsive.

Core Features Restored
Boards now spawn/render from cutlist JSON (via Render button).
Boards can be duplicated, added, or aligned.
Export works:
GLB models ‚Üí user://exports.
Blueprint PNGs (top/front/side orthographic).
